<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜è€ƒè¯­æ–‡èƒŒè¯µè¾…åŠ©å™¨ Pro</title>
    <style>
        :root {
            --primary: #3b82f6;
            --primary-hover: #2563eb;
            --bg-page: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-sub: #64748b;
            --border: #e2e8f0;
            --accent: #10b981;
            --font-ui: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --font-reading: "Times New Roman", "Songti SC", "Noto Serif SC", STSong, serif;
            --reading-size: 24px; /* é»˜è®¤å­—ä½“å¤§å° */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: var(--font-ui);
            background-color: var(--bg-page);
            color: var(--text-main);
            line-height: 1.6;
            padding: 20px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            flex: 1;
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 24px;
            height: calc(100vh - 40px);
        }

        /* å·¦ä¾§æ§åˆ¶é¢æ¿ */
        .sidebar {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
            height: 100%;
        }

        h1 { font-size: 1.5rem; font-weight: 700; color: var(--text-main); margin-bottom: 4px; }
        h2 { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-sub); margin-bottom: 10px; font-weight: 600; border-bottom: 1px solid #f1f5f9; padding-bottom: 4px; }

        .control-group { margin-bottom: 8px; }

        textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            resize: vertical;
            font-family: var(--font-reading);
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }
        textarea:focus { outline: none; border-color: var(--primary); }

        select, button {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: #fff;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        button.primary-btn {
            background: var(--primary);
            color: white;
            border: none;
            font-weight: 500;
        }
        button.primary-btn:hover { background: var(--primary-hover); }

        button.outline-btn {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
            margin-top: 10px;
        }
        button.outline-btn:hover { background: #eff6ff; }

        .radio-group { display: flex; flex-direction: column; gap: 6px; }
        .radio-label {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.1s;
            font-size: 0.95rem;
        }
        .radio-label:hover { background: #f1f5f9; }
        .radio-label input { margin-right: 10px; accent-color: var(--primary); }
        .radio-label.highlight {
            border-color: var(--primary);
            background: #eff6ff;
            color: var(--primary);
            font-weight: bold;
        }

        /* æ»‘å—é€šç”¨æ ·å¼ */
        .slider-wrapper { margin-top: 5px; }
        .slider-header { display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--text-sub); margin-bottom: 5px;}
        input[type=range] { width: 100%; cursor: pointer; accent-color: var(--primary); }

        /* å³ä¾§å±•ç¤ºåŒºåŸŸ */
        .main-content {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            overflow-y: auto;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .article-title {
            /* text-align: center; */
            font-size: 1.5em;
            font-weight: 900;
            margin-bottom: 1.5em; /* æ ‡é¢˜å’Œæ­£æ–‡çš„è·ç¦» */
            color: var(--text-main);
        }

        .output-area {
            font-family: var(--font-reading);
            font-size: var(--reading-size);
            line-height: 1.8;
            white-space: pre-wrap;
            color: var(--text-main);
            transition: font-size 0.2s;
        }

        /* QA æ¨¡å¼ä¸“ç”¨å®¹å™¨ */
        .qa-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
        }
        .qa-card {
            font-family: var(--font-reading);
            font-size: calc(var(--reading-size) * 1.5); /* QAæ¨¡å¼å­—å·å¤§ä¸€ç‚¹ */
            margin-bottom: 40px;
            line-height: 2;
        }
        .qa-hint {
            color: var(--text-sub);
            font-size: 1rem;
            margin-bottom: 20px;
        }

        /* é®ç›–æ ·å¼é€»è¾‘ */
        .char {
            display: inline-block;
            min-width: 0.5em;
            text-align: center;
            transition: color 0.2s;
            line-height: 1.1em;
        }

        .punctuation { color: var(--text-sub); font-weight: bold; margin: 0 2px; }

        /* é®ç›–çŠ¶æ€ */
        .masked {
            color: transparent;
            user-select: none;
            cursor: help;
            position: relative;
        }
        /* é¼ æ ‡æ‚¬åœå·çœ‹ */
        .masked:hover {
            color: var(--accent);
            background: rgba(16, 185, 129, 0.1);
            border-radius: 2px;
        }
        .masked:hover::after { content: none; }

        /* é®ç›–æ ·å¼ï¼šä¸‹åˆ’çº¿ */
        .style-underline .masked { border-bottom: 2px solid #cbd5e1; }
        /* é®ç›–æ ·å¼ï¼šæ–¹æ¡† */
        .style-box .masked { border: 1px solid #cbd5e1; border-radius: 4px; margin: 0 1px; background: #f8fafc; min-width: 1em;}
        /* é®ç›–æ ·å¼ï¼šç¬¦å· */
        .style-symbol .masked::after { content: 'â–¡'; position: absolute; left: 0; top: 0; width: 100%; color: #cbd5e1; }

        @media (max-width: 768px) {
            body { height: auto; padding: 10px; }
            .container { grid-template-columns: 1fr; height: auto; }
            .sidebar { height: auto; }
            .main-content { min-height: 50vh; padding: 20px; }
        }
        
        .footer-note { margin-top: auto; font-size: 0.8rem; color: #94a3b8; text-align: center; }

        /* === æ‰“å°ä¸“ç”¨æ ·å¼ (å¯¼å‡ºPDFæ—¶ç”Ÿæ•ˆ) === */
        @media print {
            /* 1. éšè—ä¸éœ€è¦çš„å…ƒç´  */
            .sidebar, 
            .footer-note, 
            button, 
            input[type=range] { 
                display: none !important; 
            }

            /* 2. é‡ç½®å®¹å™¨å¸ƒå±€ï¼Œå–æ¶ˆåˆ†æ  */
            body, .container {
                display: block !important;
                height: auto !important;
                width: 100% !important;
                padding: 0 !important;
                background: white !important; /* å»æ‰èƒŒæ™¯ç°åº• */
                margin: 0 !important;
            }

            /* 3. ä¼˜åŒ–ä¸»å†…å®¹åŒºå±•ç¤º */
            .main-content {
                box-shadow: none !important; /* å»æ‰é˜´å½± */
                border: none !important;
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
                overflow: visible !important; /* å…³é”®ï¼šç¡®ä¿é•¿æ–‡èƒ½è·¨é¡µæ‰“å°ï¼Œä¸è¢«æˆªæ–­ */
                height: auto !important;
            }

            /* 4. è°ƒæ•´æ–‡å­—æ’ç‰ˆé€‚é… A4 çº¸ */
            .output-area {
                font-size: 14pt !important; /* æ‰“å°æ—¶å­—å·ç¨å¾®è°ƒæ•´é€‚åˆä¹¦å†™ */
                line-height: 2.2 !important; /* è¡Œé—´è·åŠ å¤§ï¼Œæ–¹ä¾¿é»˜å†™å¡«å†™ */
                color: black !important;
            }
            
            /* 5. ç¡®ä¿ QA æ¨¡å¼å¡ç‰‡ä¹Ÿèƒ½æ‰“å° */
            .qa-container {
                display: block !important;
                height: auto !important;
            }
            
            .qa-card {
                font-size: 16pt !important;
                border: none !important;
            }
            .qa-hint { display: none; } /* æ‰“å°æ—¶ä¸æ˜¾ç¤ºæç¤ºè¯­ */
        }
    </style>
</head>
<body>

<div class="container">
    <!-- ä¾§è¾¹æ ï¼šè®¾ç½®ä¸è¾“å…¥ -->
    <aside class="sidebar">
        <div>
            <h1>ğŸ“– èƒŒè¯µåŠ©æ‰‹ Pro</h1>
            <p style="color: var(--text-sub); font-size: 0.9rem;">é«˜è€ƒè¯­æ–‡å¿…å¤‡ç¯‡ç›®è¾…åŠ©</p>
        </div>

        <div>
            <h2>å†…å®¹æº</h2>
            <div class="control-group">
                <select id="presetSelect" onchange="loadPreset()">
                    <option value="" disabled selected>-- å¿«é€ŸåŠ è½½å¿…èƒŒç¯‡ç›® --</option>
                </select>
            </div>
            <div class="control-group">
                <input type="text" id="customTitle" placeholder="åœ¨æ­¤è¾“å…¥æ ‡é¢˜ (å¯é€‰)" style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 8px;">
                <textarea id="customInput" placeholder="åœ¨æ­¤è¾“å…¥æ–‡æœ¬..."></textarea>
            </div>
            <button class="primary-btn" onclick="applyTextAndReset()">é‡ç½® / åº”ç”¨æ–‡æœ¬</button>
        </div>

        <div>
            <h2>è®°å¿†æ¨¡å¼</h2>
            <div class="radio-group">
                <label class="radio-label">
                    <input type="radio" name="mode" value="all" checked onchange="updateView()">
                    å…¨éƒ¨é®ç›– (é»˜å†™)
                </label>
                <label class="radio-label">
                    <input type="radio" name="mode" value="head1" onchange="updateView()">
                    æç¤ºé¦–å­—
                </label>
                <label class="radio-label">
                    <input type="radio" name="mode" value="head2" onchange="updateView()">
                    æç¤ºé¦– 2 å­—
                </label>
                <label class="radio-label">
                    <input type="radio" name="mode" value="headTail" onchange="updateView()">
                    æç¤ºé¦–å°¾å­—
                </label>
                <label class="radio-label">
                    <input type="radio" name="mode" value="random" onchange="updateView()">
                    éšæœºæŒ–ç©º
                </label>
                <!-- éšæœºæ¯”ä¾‹æ»‘å— -->
                <div class="slider-wrapper" id="randomConfig" style="display:none; padding: 0 12px 8px 34px;">
                    <div class="slider-header">
                        <span>æŒ–ç©ºæ¯”ä¾‹</span>
                        <span id="ratioDisplay" style="color:var(--primary); font-weight:bold;">50%</span>
                    </div>
                    <input type="range" id="randomRatio" min="0" max="100" value="50" oninput="updateRatioDisplay(); updateView()">
                </div>

                <!-- æ–°åŠŸèƒ½ï¼šQAæµ‹è¯• -->
                <label class="radio-label highlight">
                    <input type="radio" name="mode" value="qa" onchange="updateView()">
                    âš¡ï¸ ä¸Šä¸‹å¥éšæœºæµ‹è¯•
                </label>
            </div>
            
            <!-- QAæ¨¡å¼ä¸‹çš„ä¸“å±æŒ‰é’® -->
            <div id="qaControls" style="display:none;">
                <button class="outline-btn" onclick="nextQuestion()">ğŸ”„ æ¢ä¸€é¢˜</button>
                <button class="outline-btn" style="border-color: #10b981; color: #10b981; margin-top: 8px;" onclick="showQaAnswer()">ğŸ‘ï¸ æ˜¾ç¤ºç­”æ¡ˆ</button>

            </div>
        </div>

        <div>
            <h2>è§†è§‰ä¸æ˜¾ç¤º</h2>
            <div class="control-group">
                <select id="styleSelect" onchange="updateStyle()">
                    <option value="style-box" selected>é®ç›–æ ·å¼ï¼šæ–¹æ¡† (â–¡)</option>
                    <option value="style-underline">é®ç›–æ ·å¼ï¼šä¸‹åˆ’çº¿ (_)</option>
                    <!-- <option value="style-symbol">é®ç›–æ ·å¼ï¼šç¬¦å· (â–¡)</option> -->
                    <option value="style-invisible">é®ç›–æ ·å¼ï¼šéšå½¢ ( )</option>
                </select>
            </div>
            <!-- å­—ä½“å¤§å°æ»‘å— -->
            <div class="slider-wrapper">
                <div class="slider-header">
                    <span>å­—ä½“å¤§å°</span>
                    <span id="fontSizeDisplay">24px</span>
                </div>
                <input type="range" id="fontSizeSlider" min="14" max="48" value="24" oninput="updateFontSize()">
            </div>
            <!-- ã€æ–°å¢ã€‘å¯¼å‡ºæŒ‰é’® -->
            <div class="control-group" style="margin-top: 20px; padding-top: 20px; border-top: 1px dashed #e2e8f0;">
                <button class="primary-btn" style="background-color: #475569;" onclick="window.print()">ğŸ–¨ï¸ å¯¼å‡ºä¸ºé»˜å†™çº¸ / PDF</button>
            </div>
        </div>

        <div class="footer-note">
            æç¤ºï¼šé¼ æ ‡æ‚¬åœ(æˆ–ç‚¹å‡»)é®ç›–å¤„å¯å·çœ‹ç­”æ¡ˆã€‚
        </div>
    </aside>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content" id="outputContainer">
        <!-- æ™®é€šæ¨¡å¼è¾“å‡ºåŒº -->
        <div id="output" class="output-area style-box"></div>
        
        <!-- QAæ¨¡å¼è¾“å‡ºåŒº (é»˜è®¤éšè—) -->
        <div id="qaOutput" class="qa-container" style="display: none;">
            <div class="qa-hint">è¯·è¡¥å…¨ç¼ºå¤±çš„å¥å­ (ä¸¥æ ¼éµå¾ªå¥è¯»)</div>
            <div id="qaCardContent" class="qa-card style-box"></div>
        </div>
    </main>
</div>

<script>
    // === é¢„è®¾æ•°æ®åº“ ===
    const presets = {
        "shudaonan": {
            title: "èœ€é“éš¾ (æç™½)",
            content: "å™«ååš±ï¼Œå±ä¹é«˜å“‰ï¼èœ€é“ä¹‹éš¾ï¼Œéš¾äºä¸Šé’å¤©ï¼èš•ä¸›åŠé±¼å‡«ï¼Œå¼€å›½ä½•èŒ«ç„¶ï¼å°”æ¥å››ä¸‡å…«åƒå²ï¼Œä¸ä¸ç§¦å¡é€šäººçƒŸã€‚è¥¿å½“å¤ªç™½æœ‰é¸Ÿé“ï¼Œå¯ä»¥æ¨ªç»å³¨çœ‰å·…ã€‚åœ°å´©å±±æ‘§å£®å£«æ­»ï¼Œç„¶åå¤©æ¢¯çŸ³æ ˆç›¸é’©è¿ã€‚ä¸Šæœ‰å…­é¾™å›æ—¥ä¹‹é«˜æ ‡ï¼Œä¸‹æœ‰å†²æ³¢é€†æŠ˜ä¹‹å›å·ã€‚é»„é¹¤ä¹‹é£å°šä¸å¾—è¿‡ï¼ŒçŒ¿çŒ±æ¬²åº¦æ„æ”€æ´ã€‚é’æ³¥ä½•ç›˜ç›˜ï¼Œç™¾æ­¥ä¹æŠ˜è¦å²©å³¦ã€‚æ‰ªå‚å†äº•ä»°èƒæ¯ï¼Œä»¥æ‰‹æŠšè†ºåé•¿å¹ã€‚\né—®å›è¥¿æ¸¸ä½•æ—¶è¿˜ï¼Ÿç•é€”å·‰å²©ä¸å¯æ”€ã€‚ä½†è§æ‚²é¸Ÿå·å¤æœ¨ï¼Œé›„é£é›Œä»ç»•æ—é—´ã€‚åˆé—»å­è§„å•¼å¤œæœˆï¼Œæ„ç©ºå±±ã€‚èœ€é“ä¹‹éš¾ï¼Œéš¾äºä¸Šé’å¤©ï¼Œä½¿äººå¬æ­¤å‡‹æœ±é¢œï¼è¿å³°å»å¤©ä¸ç›ˆå°ºï¼Œæ¯æ¾å€’æŒ‚å€šç»å£ã€‚é£æ¹ç€‘æµäº‰å–§è±—ï¼Œç ¯å´–è½¬çŸ³ä¸‡å£‘é›·ã€‚å…¶é™©ä¹Ÿå¦‚æ­¤ï¼Œå—Ÿå°”è¿œé“ä¹‹äººèƒ¡ä¸ºä¹æ¥å“‰ï¼\nå‰‘é˜å³¥åµ˜è€Œå´”åµ¬ï¼Œä¸€å¤«å½“å…³ï¼Œä¸‡å¤«è«å¼€ã€‚æ‰€å®ˆæˆ–åŒªäº²ï¼ŒåŒ–ä¸ºç‹¼ä¸è±ºã€‚æœé¿çŒ›è™ï¼Œå¤•é¿é•¿è›‡ï¼›ç£¨ç‰™å®è¡€ï¼Œæ€äººå¦‚éº»ã€‚é”¦åŸè™½äº‘ä¹ï¼Œä¸å¦‚æ—©è¿˜å®¶ã€‚èœ€é“ä¹‹éš¾ï¼Œéš¾äºä¸Šé’å¤©ï¼Œä¾§èº«è¥¿æœ›é•¿å’¨å—Ÿï¼"
        },
        "chibifu": {
            title: "èµ¤å£èµ‹ (è‹è½¼)",
            content: "å£¬æˆŒä¹‹ç§‹ï¼Œä¸ƒæœˆæ—¢æœ›ï¼Œè‹å­ä¸å®¢æ³›èˆŸæ¸¸äºèµ¤å£ä¹‹ä¸‹ã€‚æ¸…é£å¾æ¥ï¼Œæ°´æ³¢ä¸å…´ã€‚ä¸¾é…’å±å®¢ï¼Œè¯µæ˜æœˆä¹‹è¯—ï¼Œæ­Œçªˆçª•ä¹‹ç« ã€‚å°‘ç„‰ï¼Œæœˆå‡ºäºä¸œå±±ä¹‹ä¸Šï¼Œå¾˜å¾Šäºæ–—ç‰›ä¹‹é—´ã€‚ç™½éœ²æ¨ªæ±Ÿï¼Œæ°´å…‰æ¥å¤©ã€‚çºµä¸€è‹‡ä¹‹æ‰€å¦‚ï¼Œå‡Œä¸‡é¡·ä¹‹èŒ«ç„¶ã€‚æµ©æµ©ä¹å¦‚å†¯è™šå¾¡é£ï¼Œè€Œä¸çŸ¥å…¶æ‰€æ­¢ï¼›é£˜é£˜ä¹å¦‚é—ä¸–ç‹¬ç«‹ï¼Œç¾½åŒ–è€Œç™»ä»™ã€‚\näºæ˜¯é¥®é…’ä¹ç”šï¼Œæ‰£èˆ·è€Œæ­Œä¹‹ã€‚æ­Œæ›°ï¼šâ€œæ¡‚æ£¹å…®å…°æ¡¨ï¼Œå‡»ç©ºæ˜å…®æº¯æµå…‰ã€‚æ¸ºæ¸ºå…®äºˆæ€€ï¼Œæœ›ç¾äººå…®å¤©ä¸€æ–¹ã€‚â€å®¢æœ‰å¹æ´ç®«è€…ï¼Œå€šæ­Œè€Œå’Œä¹‹ã€‚å…¶å£°å‘œå‘œç„¶ï¼Œå¦‚æ€¨å¦‚æ…•ï¼Œå¦‚æ³£å¦‚è¯‰ï¼Œä½™éŸ³è¢…è¢…ï¼Œä¸ç»å¦‚ç¼•ã€‚èˆå¹½å£‘ä¹‹æ½œè›Ÿï¼Œæ³£å­¤èˆŸä¹‹å« å¦‡ã€‚\nè‹å­æ„€ç„¶ï¼Œæ­£è¥Ÿå±åè€Œé—®å®¢æ›°ï¼šâ€œä½•ä¸ºå…¶ç„¶ä¹Ÿ? â€å®¢æ›°ï¼šâ€œâ€˜æœˆæ˜æ˜Ÿç¨€ï¼Œä¹Œé¹Šå—é£â€™ï¼Œæ­¤éæ›¹å­Ÿå¾·ä¹‹è¯—ä¹? è¥¿æœ›å¤å£ï¼Œä¸œæœ›æ­¦æ˜Œï¼Œå±±å·ç›¸ç¼ªï¼Œéƒä¹è‹è‹ï¼Œæ­¤éå­Ÿå¾·ä¹‹å›°äºå‘¨éƒè€…ä¹? æ–¹å…¶ç ´è†å·ï¼Œä¸‹æ±Ÿé™µï¼Œé¡ºæµè€Œä¸œä¹Ÿï¼Œèˆ³èˆ»åƒé‡Œï¼Œæ—Œæ——è”½ç©ºï¼Œé…¾é…’ä¸´æ±Ÿï¼Œæ¨ªæ§Šèµ‹è¯—ï¼Œå›ºä¸€ä¸–ä¹‹é›„ä¹Ÿï¼Œè€Œä»Šå®‰åœ¨å“‰? å†µå¾ä¸å­æ¸”æ¨µäºæ±Ÿæ¸šä¹‹ä¸Šï¼Œä¾£é±¼è™¾è€Œå‹éº‹é¹¿ï¼Œé©¾ä¸€å¶ä¹‹æ‰èˆŸï¼Œä¸¾åŒæ¨½ä»¥ç›¸å±ã€‚å¯„èœ‰è£äºå¤©åœ°ï¼Œæ¸ºæ²§æµ·ä¹‹ä¸€ç²Ÿã€‚å“€å¾ç”Ÿä¹‹é¡»è‡¾ï¼Œç¾¡é•¿æ±Ÿä¹‹æ— ç©·ã€‚æŒŸé£ä»™ä»¥é¨æ¸¸ï¼ŒæŠ±æ˜æœˆè€Œé•¿ç»ˆã€‚çŸ¥ä¸å¯ä¹éª¤å¾—ï¼Œæ‰˜é—å“äºæ‚²é£ã€‚â€\nè‹å­æ›°ï¼šâ€œå®¢äº¦çŸ¥å¤«æ°´ä¸æœˆä¹? é€è€…å¦‚æ–¯ï¼Œè€Œæœªå°å¾€ä¹Ÿï¼›ç›ˆè™šè€…å¦‚å½¼ï¼Œè€Œå’è«æ¶ˆé•¿ä¹Ÿã€‚ç›–å°†è‡ªå…¶å˜è€…è€Œè§‚ä¹‹ï¼Œåˆ™å¤©åœ°æ›¾ä¸èƒ½ä»¥ä¸€ç¬ï¼›è‡ªå…¶ä¸å˜è€…è€Œè§‚ä¹‹ï¼Œåˆ™ç‰©ä¸æˆ‘çš†æ— å°½ä¹Ÿï¼Œè€Œåˆä½•ç¾¡ä¹! ä¸”å¤«å¤©åœ°ä¹‹é—´ï¼Œç‰©å„æœ‰ä¸»ï¼Œè‹Ÿéå¾ä¹‹æ‰€æœ‰ï¼Œè™½ä¸€æ¯«è€Œè«å–ã€‚æƒŸæ±Ÿä¸Šä¹‹æ¸…é£ï¼Œä¸å±±é—´ä¹‹æ˜æœˆï¼Œè€³å¾—ä¹‹è€Œä¸ºå£°ï¼Œç›®é‡ä¹‹è€Œæˆè‰²ï¼Œå–ä¹‹æ— ç¦ï¼Œç”¨ä¹‹ä¸ç«­ï¼Œæ˜¯é€ ç‰©è€…ä¹‹æ— å°½è—ä¹Ÿï¼Œè€Œå¾ä¸å­ä¹‹æ‰€å…±é€‚ã€‚â€\nå®¢å–œè€Œç¬‘ï¼Œæ´—ç›æ›´é…Œã€‚è‚´æ ¸æ—¢å°½ï¼Œæ¯ç›˜ç‹¼ç±ã€‚ç›¸ä¸æ•è—‰ä¹èˆŸä¸­ï¼Œä¸çŸ¥ä¸œæ–¹ä¹‹æ—¢ç™½ã€‚"
        },
        "pipaxing": {
            title: "çµç¶è¡Œ (ç™½å±…æ˜“)",
            content: "æµ”é˜³æ±Ÿå¤´å¤œé€å®¢ï¼Œæ«å¶è»èŠ±ç§‹ç‘Ÿç‘Ÿã€‚ä¸»äººä¸‹é©¬å®¢åœ¨èˆ¹ï¼Œä¸¾é…’æ¬²é¥®æ— ç®¡å¼¦ã€‚é†‰ä¸æˆæ¬¢æƒ¨å°†åˆ«ï¼Œåˆ«æ—¶èŒ«èŒ«æ±Ÿæµ¸æœˆã€‚\nå¿½é—»æ°´ä¸Šçµç¶å£°ï¼Œä¸»äººå¿˜å½’å®¢ä¸å‘ã€‚å¯»å£°æš—é—®å¼¹è€…è°ï¼Œçµç¶å£°åœæ¬²è¯­è¿Ÿã€‚ç§»èˆ¹ç›¸è¿‘é‚€ç›¸è§ï¼Œæ·»é…’å›ç¯é‡å¼€å®´ã€‚åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼ŒçŠ¹æŠ±çµç¶åŠé®é¢ã€‚è½¬è½´æ‹¨å¼¦ä¸‰ä¸¤å£°ï¼Œæœªæˆæ›²è°ƒå…ˆæœ‰æƒ…ã€‚å¼¦å¼¦æ©æŠ‘å£°å£°æ€ï¼Œä¼¼è¯‰å¹³ç”Ÿä¸å¾—å¿—ã€‚ä½çœ‰ä¿¡æ‰‹ç»­ç»­å¼¹ï¼Œè¯´å°½å¿ƒä¸­æ— é™äº‹ã€‚è½»æ‹¢æ…¢æ»æŠ¹å¤æŒ‘ï¼Œåˆä¸ºã€Šéœ“è£³ã€‹åã€Šå…­å¹ºã€‹ã€‚å¤§å¼¦å˜ˆå˜ˆå¦‚æ€¥é›¨ï¼Œå°å¼¦åˆ‡åˆ‡å¦‚ç§è¯­ã€‚å˜ˆå˜ˆåˆ‡åˆ‡é”™æ‚å¼¹ï¼Œå¤§ç å°ç è½ç‰ç›˜ã€‚é—´å…³èºè¯­èŠ±åº•æ»‘ï¼Œå¹½å’½æ³‰æµå†°ä¸‹éš¾ã€‚å†°æ³‰å†·æ¶©å¼¦å‡ç»ï¼Œå‡ç»ä¸é€šå£°æš‚æ­‡ã€‚åˆ«æœ‰å¹½æ„æš—æ¨ç”Ÿï¼Œæ­¤æ—¶æ— å£°èƒœæœ‰å£°ã€‚é“¶ç“¶ä¹ç ´æ°´æµ†è¿¸ï¼Œé“éª‘çªå‡ºåˆ€æªé¸£ã€‚æ›²ç»ˆæ”¶æ‹¨å½“å¿ƒç”»ï¼Œå››å¼¦ä¸€å£°å¦‚è£‚å¸›ã€‚ä¸œèˆ¹è¥¿èˆ«æ‚„æ— è¨€ï¼Œå”¯è§æ±Ÿå¿ƒç§‹æœˆç™½ã€‚\næ²‰åŸæ”¾æ‹¨æ’å¼¦ä¸­ï¼Œæ•´é¡¿è¡£è£³èµ·æ•›å®¹ã€‚è‡ªè¨€æœ¬æ˜¯äº¬åŸå¥³ï¼Œå®¶åœ¨è™¾èŸ†é™µä¸‹ä½ã€‚åä¸‰å­¦å¾—çµç¶æˆï¼Œåå±æ•™åŠç¬¬ä¸€éƒ¨ã€‚æ›²ç½¢æ›¾æ•™å–„æ‰æœï¼Œå¦†æˆæ¯è¢«ç§‹å¨˜å¦’ã€‚äº”é™µå¹´å°‘äº‰ç¼ å¤´ï¼Œä¸€æ›²çº¢ç»¡ä¸çŸ¥æ•°ã€‚é’¿å¤´é“¶ç¯¦å‡»èŠ‚ç¢ï¼Œè¡€è‰²ç½—è£™ç¿»é…’æ±¡ã€‚ä»Šå¹´æ¬¢ç¬‘å¤æ˜å¹´ï¼Œç§‹æœˆæ˜¥é£ç­‰é—²åº¦ã€‚å¼Ÿèµ°ä»å†›é˜¿å§¨æ­»ï¼Œæš®å»æœæ¥é¢œè‰²æ•…ã€‚é—¨å‰å†·è½éé©¬ç¨€ï¼Œè€å¤§å«ä½œå•†äººå¦‡ã€‚å•†äººé‡åˆ©è½»åˆ«ç¦»ï¼Œå‰æœˆæµ®æ¢ä¹°èŒ¶å»ã€‚å»æ¥æ±Ÿå£å®ˆç©ºèˆ¹ï¼Œç»•èˆ¹æœˆæ˜æ±Ÿæ°´å¯’ã€‚å¤œæ·±å¿½æ¢¦å°‘å¹´äº‹ï¼Œæ¢¦å•¼å¦†æ³ªçº¢é˜‘å¹²ã€‚\næˆ‘é—»çµç¶å·²å¹æ¯ï¼Œåˆé—»æ­¤è¯­é‡å”§å”§ã€‚åŒæ˜¯å¤©æ¶¯æ²¦è½äººï¼Œç›¸é€¢ä½•å¿…æ›¾ç›¸è¯†ï¼æˆ‘ä»å»å¹´è¾å¸äº¬ï¼Œè°ªå±…å§ç—…æµ”é˜³åŸã€‚æµ”é˜³åœ°åƒ»æ— éŸ³ä¹ï¼Œç»ˆå²ä¸é—»ä¸ç«¹å£°ã€‚ä½è¿‘æ¹“æ±Ÿåœ°ä½æ¹¿ï¼Œé»„èŠ¦è‹¦ç«¹ç»•å®…ç”Ÿã€‚å…¶é—´æ—¦æš®é—»ä½•ç‰©ï¼Ÿæœé¹ƒå•¼è¡€çŒ¿å“€é¸£ã€‚æ˜¥æ±ŸèŠ±æœç§‹æœˆå¤œï¼Œå¾€å¾€å–é…’è¿˜ç‹¬å€¾ã€‚å²‚æ— å±±æ­Œä¸æ‘ç¬›ï¼Ÿå‘•å“‘å˜²å“³éš¾ä¸ºå¬ã€‚ä»Šå¤œé—»å›çµç¶è¯­ï¼Œå¦‚å¬ä»™ä¹è€³æš‚æ˜ã€‚è«è¾æ›´åå¼¹ä¸€æ›²ï¼Œä¸ºå›ç¿»ä½œã€Šçµç¶è¡Œã€‹ã€‚\næ„Ÿæˆ‘æ­¤è¨€è‰¯ä¹…ç«‹ï¼Œå´åä¿ƒå¼¦å¼¦è½¬æ€¥ã€‚å‡„å‡„ä¸ä¼¼å‘å‰å£°ï¼Œæ»¡åº§é‡é—»çš†æ©æ³£ã€‚åº§ä¸­æ³£ä¸‹è°æœ€å¤šï¼Ÿæ±Ÿå·å¸é©¬é’è¡«æ¹¿ã€‚"
        },
        "shishuo": {
            title: "å¸ˆè¯´ (éŸ©æ„ˆ)",
            content: "å¤ä¹‹å­¦è€…å¿…æœ‰å¸ˆã€‚å¸ˆè€…ï¼Œæ‰€ä»¥ä¼ é“å—ä¸šè§£æƒ‘ä¹Ÿã€‚äººéç”Ÿè€ŒçŸ¥ä¹‹è€…ï¼Œå­°èƒ½æ— æƒ‘ï¼Ÿæƒ‘è€Œä¸ä»å¸ˆï¼Œå…¶ä¸ºæƒ‘ä¹Ÿï¼Œç»ˆä¸è§£çŸ£ã€‚ç”Ÿä¹å¾å‰ï¼Œå…¶é—»é“ä¹Ÿå›ºå…ˆä¹å¾ï¼Œå¾ä»è€Œå¸ˆä¹‹ï¼›ç”Ÿä¹å¾åï¼Œå…¶é—»é“ä¹Ÿäº¦å…ˆä¹å¾ï¼Œå¾ä»è€Œå¸ˆä¹‹ã€‚å¾å¸ˆé“ä¹Ÿï¼Œå¤«åº¸çŸ¥å…¶å¹´ä¹‹å…ˆåç”Ÿäºå¾ä¹ï¼Ÿæ˜¯æ•…æ— è´µæ— è´±ï¼Œæ— é•¿æ— å°‘ï¼Œé“ä¹‹æ‰€å­˜ï¼Œå¸ˆä¹‹æ‰€å­˜ä¹Ÿã€‚\nå—Ÿä¹ï¼å¸ˆé“ä¹‹ä¸ä¼ ä¹Ÿä¹…çŸ£ï¼æ¬²äººä¹‹æ— æƒ‘ä¹Ÿéš¾çŸ£ï¼å¤ä¹‹åœ£äººï¼Œå…¶å‡ºäººä¹Ÿè¿œçŸ£ï¼ŒçŠ¹ä¸”ä»å¸ˆè€Œé—®ç„‰ï¼›ä»Šä¹‹ä¼—äººï¼Œå…¶ä¸‹åœ£äººä¹Ÿäº¦è¿œçŸ£ï¼Œè€Œè€»å­¦äºå¸ˆã€‚æ˜¯æ•…åœ£ç›Šåœ£ï¼Œæ„šç›Šæ„šã€‚åœ£äººä¹‹æ‰€ä»¥ä¸ºåœ£ï¼Œæ„šäººä¹‹æ‰€ä»¥ä¸ºæ„šï¼Œå…¶çš†å‡ºäºæ­¤ä¹ï¼Ÿçˆ±å…¶å­ï¼Œæ‹©å¸ˆè€Œæ•™ä¹‹ï¼›äºå…¶èº«ä¹Ÿï¼Œåˆ™è€»å¸ˆç„‰ï¼Œæƒ‘çŸ£ã€‚å½¼ç«¥å­ä¹‹å¸ˆï¼Œæˆä¹‹ä¹¦è€Œä¹ å…¶å¥è¯»è€…ï¼Œéå¾æ‰€è°“ä¼ å…¶é“è§£å…¶æƒ‘è€…ä¹Ÿã€‚å¥è¯»ä¹‹ä¸çŸ¥ï¼Œæƒ‘ä¹‹ä¸è§£ï¼Œæˆ–å¸ˆç„‰ï¼Œæˆ–ä¸ç„‰ï¼Œå°å­¦è€Œå¤§é—ï¼Œå¾æœªè§å…¶æ˜ä¹Ÿã€‚å·«åŒ»ä¹å¸ˆç™¾å·¥ä¹‹äººï¼Œä¸è€»ç›¸å¸ˆã€‚å£«å¤§å¤«ä¹‹æ—ï¼Œæ›°å¸ˆæ›°å¼Ÿå­äº‘è€…ï¼Œåˆ™ç¾¤èšè€Œç¬‘ä¹‹ã€‚é—®ä¹‹ï¼Œåˆ™æ›°ï¼šâ€œå½¼ä¸å½¼å¹´ç›¸è‹¥ä¹Ÿï¼Œé“ç›¸ä¼¼ä¹Ÿï¼Œä½å‘åˆ™è¶³ç¾ï¼Œå®˜ç››åˆ™è¿‘è°€ã€‚â€å‘œå‘¼ï¼å¸ˆé“ä¹‹ä¸å¤ï¼Œå¯çŸ¥çŸ£ã€‚å·«åŒ»ä¹å¸ˆç™¾å·¥ä¹‹äººï¼Œå›å­ä¸é½¿ï¼Œä»Šå…¶æ™ºä¹ƒåä¸èƒ½ä¸åŠï¼Œå…¶å¯æ€ªä¹Ÿæ¬¤ï¼\nåœ£äººæ— å¸¸å¸ˆã€‚å­”å­å¸ˆéƒ¯å­ã€è‹Œå¼˜ã€å¸ˆè¥„ã€è€èƒã€‚éƒ¯å­ä¹‹å¾’ï¼Œå…¶è´¤ä¸åŠå­”å­ã€‚å­”å­æ›°ï¼šâ€œä¸‰äººè¡Œï¼Œåˆ™å¿…æœ‰æˆ‘å¸ˆã€‚â€æ˜¯æ•…å¼Ÿå­ä¸å¿…ä¸å¦‚å¸ˆï¼Œå¸ˆä¸å¿…è´¤äºå¼Ÿå­ï¼Œé—»é“æœ‰å…ˆåï¼Œæœ¯ä¸šæœ‰ä¸“æ”»ï¼Œå¦‚æ˜¯è€Œå·²ã€‚\nææ°å­èŸ ï¼Œå¹´åä¸ƒï¼Œå¥½å¤æ–‡ï¼Œå…­è‰ºç»ä¼ çš†é€šä¹ ä¹‹ï¼Œä¸æ‹˜äºæ—¶ï¼Œå­¦äºä½™ã€‚ä½™å˜‰å…¶èƒ½è¡Œå¤é“ï¼Œä½œã€Šå¸ˆè¯´ã€‹ä»¥è´»ä¹‹ã€‚"
        },
        "xiaoyaoyou": {
            title: "é€é¥æ¸¸ (èŠ‚é€‰)",
            content: "åŒ—å†¥æœ‰é±¼ï¼Œå…¶åä¸ºé²²ã€‚é²²ä¹‹å¤§ï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›åŒ–è€Œä¸ºé¸Ÿï¼Œå…¶åä¸ºé¹ã€‚é¹ä¹‹èƒŒï¼Œä¸çŸ¥å…¶å‡ åƒé‡Œä¹Ÿï¼›æ€’è€Œé£ï¼Œå…¶ç¿¼è‹¥å‚å¤©ä¹‹äº‘ã€‚æ˜¯é¸Ÿä¹Ÿï¼Œæµ·è¿åˆ™å°†å¾™äºå—å†¥ã€‚å—å†¥è€…ï¼Œå¤©æ± ä¹Ÿã€‚ã€Šé½è°ã€‹è€…ï¼Œå¿—æ€ªè€…ä¹Ÿã€‚ã€Šè°ã€‹ä¹‹è¨€æ›°ï¼šâ€œé¹ä¹‹å¾™äºå—å†¥ä¹Ÿï¼Œæ°´å‡»ä¸‰åƒé‡Œï¼ŒæŠŸæ‰¶æ‘‡è€Œä¸Šè€…ä¹ä¸‡é‡Œï¼Œå»ä»¥å…­æœˆæ¯è€…ä¹Ÿã€‚â€é‡é©¬ä¹Ÿï¼Œå°˜åŸƒä¹Ÿï¼Œç”Ÿç‰©ä¹‹ä»¥æ¯ç›¸å¹ä¹Ÿã€‚å¤©ä¹‹è‹è‹ï¼Œå…¶æ­£è‰²é‚ªï¼Ÿå…¶è¿œè€Œæ— æ‰€è‡³æé‚ªï¼Ÿå…¶è§†ä¸‹ä¹Ÿï¼Œäº¦è‹¥æ˜¯åˆ™å·²çŸ£ã€‚ä¸”å¤«æ°´ä¹‹ç§¯ä¹Ÿä¸åšï¼Œåˆ™å…¶è´Ÿå¤§èˆŸä¹Ÿæ— åŠ›ã€‚è¦†æ¯æ°´äºå³å ‚ä¹‹ä¸Šï¼Œåˆ™èŠ¥ä¸ºä¹‹èˆŸï¼›ç½®æ¯ç„‰åˆ™èƒ¶ï¼Œæ°´æµ…è€ŒèˆŸå¤§ä¹Ÿã€‚é£ä¹‹ç§¯ä¹Ÿä¸åšï¼Œåˆ™å…¶è´Ÿå¤§ç¿¼ä¹Ÿæ— åŠ›ã€‚æ•…ä¹ä¸‡é‡Œï¼Œåˆ™é£æ–¯åœ¨ä¸‹çŸ£ï¼Œè€Œåä¹ƒä»ŠåŸ¹é£ï¼›èƒŒè´Ÿé’å¤©ï¼Œè€Œè«ä¹‹å¤­é˜è€…ï¼Œè€Œåä¹ƒä»Šå°†å›¾å—ã€‚èœ©ä¸å­¦é¸ ç¬‘ä¹‹æ›°ï¼šâ€œæˆ‘å†³èµ·è€Œé£ï¼ŒæŠ¢æ¦†æ‹è€Œæ­¢ï¼Œæ—¶åˆ™ä¸è‡³ï¼Œè€Œæ§äºåœ°è€Œå·²çŸ£ï¼Œå¥šä»¥ä¹‹ä¹ä¸‡é‡Œè€Œå—ä¸ºï¼Ÿâ€é€‚è½è‹è€…ï¼Œä¸‰é¤è€Œåï¼Œè…¹çŠ¹æœç„¶ï¼›é€‚ç™¾é‡Œè€…ï¼Œå®¿èˆ‚ç²®ï¼›é€‚åƒé‡Œè€…ï¼Œä¸‰æœˆèšç²®ã€‚ä¹‹äºŒè™«åˆä½•çŸ¥ï¼å°çŸ¥ä¸åŠå¤§çŸ¥ï¼Œå°å¹´ä¸åŠå¤§å¹´ã€‚å¥šä»¥çŸ¥å…¶ç„¶ä¹Ÿï¼ŸæœèŒä¸çŸ¥æ™¦æœ”ï¼ŒèŸªè›„ä¸çŸ¥æ˜¥ç§‹ï¼Œæ­¤å°å¹´ä¹Ÿã€‚æ¥šä¹‹å—æœ‰å†¥çµè€…ï¼Œä»¥äº”ç™¾å²ä¸ºæ˜¥ï¼Œäº”ç™¾å²ä¸ºç§‹ï¼›ä¸Šå¤æœ‰å¤§æ¤¿è€…ï¼Œä»¥å…«åƒå²ä¸ºæ˜¥ï¼Œå…«åƒå²ä¸ºç§‹ï¼Œæ­¤å¤§å¹´ä¹Ÿã€‚è€Œå½­ç¥–ä¹ƒä»Šä»¥ä¹…ç‰¹é—»ï¼Œä¼—äººåŒ¹ä¹‹ï¼Œä¸äº¦æ‚²ä¹ï¼"
        },
        "aguifang": {
            title: "é˜¿æˆ¿å®«èµ‹ (æœç‰§)",
            content: "å…­ç‹æ¯•ï¼Œå››æµ·ä¸€ï¼Œèœ€å±±å…€ï¼Œé˜¿æˆ¿å‡ºã€‚è¦†å‹ä¸‰ç™¾ä½™é‡Œï¼Œéš”ç¦»å¤©æ—¥ã€‚éªŠå±±åŒ—æ„è€Œè¥¿æŠ˜ï¼Œç›´èµ°å’¸é˜³ã€‚äºŒå·æº¶æº¶ï¼Œæµå…¥å®«å¢™ã€‚äº”æ­¥ä¸€æ¥¼ï¼Œåæ­¥ä¸€é˜ï¼›å»Šè…°ç¼¦å›ï¼Œæªç‰™é«˜å•„ï¼›å„æŠ±åœ°åŠ¿ï¼Œé’©å¿ƒæ–—è§’ã€‚ç›˜ç›˜ç„‰ï¼Œå›·å›·ç„‰ï¼Œèœ‚æˆ¿æ°´æ¶¡ï¼ŒçŸ—ä¸çŸ¥å…¶å‡ åƒä¸‡è½ã€‚é•¿æ¡¥å§æ³¢ï¼Œæœªäº‘ä½•é¾™ï¼Ÿå¤é“è¡Œç©ºï¼Œä¸éœä½•è™¹ï¼Ÿé«˜ä½å†¥è¿·ï¼Œä¸çŸ¥è¥¿ä¸œã€‚æ­Œå°æš–å“ï¼Œæ˜¥å…‰èèï¼›èˆæ®¿å†·è¢–ï¼Œé£é›¨å‡„å‡„ã€‚ä¸€æ—¥ä¹‹å†…ï¼Œä¸€å®«ä¹‹é—´ï¼Œè€Œæ°”å€™ä¸é½ã€‚\nå¦ƒå«”åªµå«±ï¼Œç‹å­çš‡å­™ï¼Œè¾æ¥¼ä¸‹æ®¿ï¼Œè¾‡æ¥äºç§¦ã€‚æœæ­Œå¤œå¼¦ï¼Œä¸ºç§¦å®«äººã€‚æ˜æ˜Ÿè§è§ï¼Œå¼€å¦†é•œä¹Ÿï¼›ç»¿äº‘æ‰°æ‰°ï¼Œæ¢³æ™“é¬Ÿä¹Ÿï¼›æ¸­æµæ¶¨è…»ï¼Œå¼ƒè„‚æ°´ä¹Ÿï¼›çƒŸæ–œé›¾æ¨ªï¼Œç„šæ¤’å…°ä¹Ÿã€‚é›·éœ†ä¹æƒŠï¼Œå®«è½¦è¿‡ä¹Ÿï¼›è¾˜è¾˜è¿œå¬ï¼Œæ³ä¸çŸ¥å…¶æ‰€ä¹‹ä¹Ÿã€‚ä¸€è‚Œä¸€å®¹ï¼Œå°½æ€æå¦ï¼Œç¼¦ç«‹è¿œè§†ï¼Œè€Œæœ›å¹¸ç„‰ã€‚æœ‰ä¸è§è€…ï¼Œä¸‰åå…­å¹´ã€‚\nç‡•èµµä¹‹æ”¶è—ï¼ŒéŸ©é­ä¹‹ç»è¥ï¼Œé½æ¥šä¹‹ç²¾è‹±ï¼Œå‡ ä¸–å‡ å¹´ï¼Œå‰½æ å…¶äººï¼Œå€šå å¦‚å±±ã€‚ä¸€æ—¦ä¸èƒ½æœ‰ï¼Œè¾“æ¥å…¶é—´ã€‚é¼é“›ç‰çŸ³ï¼Œé‡‘å—ç ç ¾ï¼Œå¼ƒæ·é€¦è¿¤ï¼Œç§¦äººè§†ä¹‹ï¼Œäº¦ä¸ç”šæƒœã€‚\nå—Ÿä¹ï¼ä¸€äººä¹‹å¿ƒï¼Œåƒä¸‡äººä¹‹å¿ƒä¹Ÿã€‚ç§¦çˆ±çº·å¥¢ï¼Œäººäº¦å¿µå…¶å®¶ã€‚å¥ˆä½•å–ä¹‹å°½é”±é“¢ï¼Œç”¨ä¹‹å¦‚æ³¥æ²™ï¼Ÿä½¿è´Ÿæ ‹ä¹‹æŸ±ï¼Œå¤šäºå—äº©ä¹‹å†œå¤«ï¼›æ¶æ¢ä¹‹æ¤½ï¼Œå¤šäºæœºä¸Šä¹‹å·¥å¥³ï¼›é’‰å¤´ç£·ç£·ï¼Œå¤šäºåœ¨åº¾ä¹‹ç²Ÿç²’ï¼›ç“¦ç¼å‚å·®ï¼Œå¤šäºå‘¨èº«ä¹‹å¸›ç¼•ï¼›ç›´æ æ¨ªæ§›ï¼Œå¤šäºä¹åœŸä¹‹åŸéƒ­ï¼›ç®¡å¼¦å‘•å“‘ï¼Œå¤šäºå¸‚äººä¹‹è¨€è¯­ã€‚ä½¿å¤©ä¸‹ä¹‹äººï¼Œä¸æ•¢è¨€è€Œæ•¢æ€’ã€‚ç‹¬å¤«ä¹‹å¿ƒï¼Œæ—¥ç›Šéª„å›ºã€‚æˆå’å«ï¼Œå‡½è°·ä¸¾ï¼Œæ¥šäººä¸€ç‚¬ï¼Œå¯æ€œç„¦åœŸï¼\nå‘œå‘¼ï¼ç­å…­å›½è€…å…­å›½ä¹Ÿï¼Œéç§¦ä¹Ÿï¼›æ—ç§¦è€…ç§¦ä¹Ÿï¼Œéå¤©ä¸‹ä¹Ÿã€‚å—Ÿä¹ï¼ä½¿å…­å›½å„çˆ±å…¶äººï¼Œåˆ™è¶³ä»¥æ‹’ç§¦ï¼›ä½¿ç§¦å¤çˆ±å…­å›½ä¹‹äººï¼Œåˆ™é€’ä¸‰ä¸–å¯è‡³ä¸‡ä¸–è€Œä¸ºå›ï¼Œè°å¾—è€Œæ—ç­ä¹Ÿï¼Ÿç§¦äººä¸æš‡è‡ªå“€ï¼Œè€Œåäººå“€ä¹‹ï¼›åäººå“€ä¹‹è€Œä¸é‰´ä¹‹ï¼Œäº¦ä½¿åäººè€Œå¤å“€åäººä¹Ÿã€‚"
        }
    };

    // === åˆå§‹åŒ– ===
    window.onload = function() {
        const select = document.getElementById('presetSelect');
        for (const [key, val] of Object.entries(presets)) {
            const option = document.createElement('option');
            option.value = key;
            option.textContent = val.title;
            select.appendChild(option);
        }
        
        select.value = "shudaonan";
        loadPreset();
    };

    // === UI äº¤äº’å‡½æ•° ===

    function loadPreset() {
        const key = document.getElementById('presetSelect').value;
        if (presets[key]) {
            document.getElementById('customTitle').value = presets[key].title;
            document.getElementById('customInput').value = presets[key].content;
            applyTextAndReset();
        }
    }

    function applyTextAndReset() {
        updateView();
    }

    function updateRatioDisplay() {
        const val = document.getElementById('randomRatio').value;
        document.getElementById('ratioDisplay').textContent = val + "%";
    }

    function updateFontSize() {
        const val = document.getElementById('fontSizeSlider').value;
        document.getElementById('fontSizeDisplay').textContent = val + "px";
        document.documentElement.style.setProperty('--reading-size', val + "px");
    }

    function updateStyle() {
        const style = document.getElementById('styleSelect').value;
        const output = document.getElementById('output');
        const qaCard = document.getElementById('qaCardContent');
        
        // ç§»é™¤æ‰€æœ‰style-å¼€å¤´çš„ç±»
        const removeStyles = (el) => {
            el.classList.forEach(cls => {
                if (cls.startsWith('style-')) el.classList.remove(cls);
            });
            el.classList.add(style);
        };
        
        removeStyles(output);
        removeStyles(qaCard);
    }

    // === æ ¸å¿ƒé€»è¾‘å‡½æ•° ===

    function updateView() {
        var text = document.getElementById('customInput').value;
        text = ('ã€€ã€€' + text).replace(/\n/g, '\nã€€ã€€'); 
        const mode = document.querySelector('input[name="mode"]:checked').value;
        
        const randomConfig = document.getElementById('randomConfig');
        const qaControls = document.getElementById('qaControls');
        const normalOutput = document.getElementById('output');
        const qaOutput = document.getElementById('qaOutput');

        // UI å…ƒç´ æ˜¾éšæ§åˆ¶
        randomConfig.style.display = (mode === 'random') ? 'block' : 'none';
        qaControls.style.display = (mode === 'qa') ? 'block' : 'none';

        if (mode === 'qa') {
            normalOutput.style.display = 'none';
            qaOutput.style.display = 'flex';
            generateAndRenderQuestion(text);
        } else {
            normalOutput.style.display = 'block';
            qaOutput.style.display = 'none';
            renderNormalMode(text, mode);
        }
    }

    // --- æ™®é€šæ¨¡å¼æ¸²æŸ“ ---
    function renderNormalMode(text, mode) {
        const outputDiv = document.getElementById('output');
        if (!text) {
            outputDiv.innerHTML = '<span style="color:#94a3b8">è¯·é€‰æ‹©ç¯‡ç›®æˆ–è¾“å…¥æ–‡æœ¬...</span>';
            return;
        }

        const parts = text.split(/([^\u4e00-\u9fa5]+)/g);
        let html = '';

        const titleVal = document.getElementById('customTitle').value;
        if (titleVal) {
            html += `<div class="article-title">${titleVal}</div>`;
        }

        parts.forEach(part => {
            if (!part) return;
            if (/[^\u4e00-\u9fa5]/.test(part)) {
                const safePart = part.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                html += `<span class="punctuation">${safePart}</span>`;
            } else {
                html += processSegment(part, mode);
            }
        });
        outputDiv.innerHTML = html;
    }

    function processSegment(segment, mode) {
        let result = '';
        const len = segment.length;
        const ratio = document.getElementById('randomRatio').value / 100;

        for (let i = 0; i < len; i++) {
            const char = segment[i];
            let shouldMask = true;

            switch (mode) {
                case 'all': shouldMask = true; break;
                case 'head1': if (i === 0) shouldMask = false; break;
                case 'head2': if (i < 2) shouldMask = false; break;
                case 'headTail': if (i === 0 || i === len - 1) shouldMask = false; break;
                case 'random': if (Math.random() < ratio) shouldMask = false; break;
            }

            if (shouldMask) {
                result += `<span class="char masked" data-answer="${char}">${char}</span>`;
            } else {
                result += `<span class="char">${char}</span>`;
            }
        }
        return result;
    }

    // --- QA (æµ‹è¯•) æ¨¡å¼é€»è¾‘ ---
    
    let currentQAPairs = [];

    function nextQuestion() {
        const text = document.getElementById('customInput').value;
        generateAndRenderQuestion(text);
    }

    function generateAndRenderQuestion(text) {
        if (!text) return;

        // 1. è§£ææ–‡æœ¬ï¼Œå¯»æ‰¾åˆæ³•çš„æµ‹è¯•å¯¹
        // è§„åˆ™ï¼šè¢«é€—å·ã€åˆ†å·ç­‰è¿æ¥çš„ä¸¤ä¸ªä¸­æ–‡ç‰‡æ®µï¼Œä¸èƒ½è·¨è¶Šå¥å·ã€æ„Ÿå¹å·ã€å¼•å·ç­‰ã€‚
        const pairs = findValidPairs(text);

        const cardContent = document.getElementById('qaCardContent');

        if (pairs.length === 0) {
            cardContent.innerHTML = "å½“å‰æ–‡æœ¬å¤ªçŸ­æˆ–æ²¡æœ‰æ ‡ç‚¹ï¼Œæ— æ³•ç”Ÿæˆä¸Šä¸‹å¥æµ‹è¯•ã€‚";
            return;
        }

        // 2. éšæœºé€‰å–ä¸€å¯¹
        const pair = pairs[Math.floor(Math.random() * pairs.length)];
        
        // 3. éšæœºå†³å®šæ–¹å‘ (0: ç»™å‡ºå‰å¥æµ‹åå¥, 1: ç»™å‡ºåå¥æµ‹å‰å¥)
        const direction = Math.random() > 0.5 ? 0 : 1;

        let html = '';
        
        // ç”ŸæˆHTMLè¾…åŠ©å‡½æ•°ï¼šæ ¹æ®æ˜¯å¦é®ç›–ç”Ÿæˆ span
        const generateSpan = (str, isMasked) => {
            if (!isMasked) return `<span class="char">${str}</span>`;
            
            // å¯¹æ¯ä¸ªå­—è¿›è¡Œé®ç›–
            let s = '';
            for(let c of str) {
                s += `<span class="char masked" data-answer="${c}">${c}</span>`;
            }
            return s;
        };

        const safePunc = `<span class="punctuation">${pair.punc}</span>`;

        if (direction === 0) {
            // ç»™ä¸Šå¥ï¼Œæµ‹ä¸‹å¥
            html += generateSpan(pair.prev, false);
            html += safePunc;
            html += generateSpan(pair.next, true);
        } else {
            // ç»™ä¸‹å¥ï¼Œæµ‹ä¸Šå¥
            html += generateSpan(pair.prev, true);
            html += safePunc;
            html += generateSpan(pair.next, false);
        }

        cardContent.innerHTML = html;
    }

    // å¤æ‚çš„æ–‡æœ¬è§£æç®—æ³•ï¼šå¯»æ‰¾åˆæ³•å¥å¯¹
    function findValidPairs(text) {
        // å®šä¹‰â€œåœæ­¢ç¬¦â€ï¼šé‡åˆ°è¿™äº›ç¬¦å·ï¼Œè¯´æ˜å¥å­å½»åº•ç»“æŸï¼Œä¸èƒ½è·¨è¶Šæµ‹è¯•
        // åŒ…å«ï¼šå¥å·ã€é—®å·ã€æ„Ÿå¹å·ã€å†’å·ã€æ¢è¡Œã€å¼•å·(é˜²æ­¢å¼•å·å†…å¤–çš„é€»è¾‘æ··æ·†)
        const stopRegex = /[ã€‚ï¼Ÿ;ï¼›ï¼ï¼š:?!\n\r"â€œâ€'â€˜â€™]/;
        
        // å®šä¹‰â€œè¿æ¥ç¬¦â€ï¼šå¯ä»¥ä½œä¸ºä¸Šä¸‹å¥è¿æ¥çš„ç¬¦å·
        // åŒ…å«ï¼šé€—å·ã€åˆ†å·ã€é¡¿å·
        const connectRegex = /[ï¼Œ,ã€]/;

        // 1. å…ˆæŒ‰åœæ­¢ç¬¦åˆ‡æ–­æˆå¤§å—ï¼ˆSentence Blockï¼‰
        // ä½¿ç”¨ split æ­£åˆ™ä¿ç•™åˆ†éš”ç¬¦ï¼Œä»¥ä¾¿æˆ‘ä»¬çŸ¥é“è¾¹ç•Œï¼Œè™½ç„¶è¿™é‡Œæˆ‘ä»¬å…¶å®åªéœ€è¦å†…å®¹
        const blocks = text.split(stopRegex);
        
        const validPairs = [];

        blocks.forEach(block => {
            if (!block.trim()) return;

            // 2. åœ¨å¤§å—å†…éƒ¨ï¼ŒæŒ‰è¿æ¥ç¬¦å¯»æ‰¾ä¸­æ–‡ç‰‡æ®µ
            // æ­£åˆ™é€»è¾‘ï¼š(ä¸­æ–‡ç‰‡æ®µ)(è¿æ¥ç¬¦)(ä¸­æ–‡ç‰‡æ®µ)...
            // ä½¿ç”¨ matchAll æˆ–ç®€å•çš„ split
            // è¿™é‡Œæˆ‘ä»¬æ‰‹åŠ¨éå†ä»¥ç¡®ä¿ç²¾ç¡®æ§åˆ¶
            
            // ç®€å•çš„åˆ†è¯ï¼šåˆ†å‰²å‡º [ä¸­æ–‡, æ ‡ç‚¹, ä¸­æ–‡, æ ‡ç‚¹...]
            // æ³¨æ„ï¼šblockå¯èƒ½åŒ…å« "ä¸­æ–‡,ä¸­æ–‡;ä¸­æ–‡"
            const segments = [];
            let buffer = '';
            let lastType = 'none'; // 'text' or 'punc'

            for (let char of block) {
                if (connectRegex.test(char)) {
                    // æ˜¯è¿æ¥æ ‡ç‚¹
                    if (buffer && lastType === 'text') {
                        segments.push({ type: 'text', val: buffer });
                        buffer = '';
                    }
                    // å¦‚æœæ ‡ç‚¹è¿ç»­ï¼Œåˆå¹¶å¤„ç†æˆ–è€…å•ç‹¬å­˜ï¼Ÿè¿™é‡Œç®€åŒ–ï¼Œæ ‡ç‚¹å•ç‹¬å­˜
                    segments.push({ type: 'punc', val: char });
                    lastType = 'punc';
                } else if (/[\u4e00-\u9fa5]/.test(char)) {
                    // æ˜¯ä¸­æ–‡
                    if (lastType === 'punc') {
                        buffer = ''; // æ–°çš„æ–‡å­—æ®µå¼€å§‹
                    }
                    buffer += char;
                    lastType = 'text';
                } else {
                    // å…¶ä»–å­—ç¬¦ï¼ˆå¦‚ç©ºæ ¼ã€æ— å…³ç¬¦å·ï¼‰ï¼Œå¿½ç•¥æˆ–è§†ä¸ºæ–­ç‚¹ï¼Ÿ
                    // ç®€å•èµ·è§ï¼Œå¦‚æœbufferé‡Œæœ‰ä¸­æ–‡ï¼Œè§†ä¸ºä¸€æ®µç»“æŸ
                    // ä½†ä¸å­˜å…¥æ ‡ç‚¹ï¼Œè¿™æ ·ä¼šæ–­å¼€è¿æ¥
                }
            }
            if (buffer && lastType === 'text') {
                segments.push({ type: 'text', val: buffer });
            }

            // 3. ç»„è£… Pairs
            // segments ç»“æ„å¦‚: [{text:'èœ€é“ä¹‹éš¾'}, {punc:'ï¼Œ'}, {text:'éš¾äºä¸Šé’å¤©'}]
            for (let i = 0; i < segments.length - 2; i++) {
                const prev = segments[i];
                const punc = segments[i+1];
                const next = segments[i+2];

                if (prev.type === 'text' && punc.type === 'punc' && next.type === 'text') {
                    // æ‰¾åˆ°ä¸€å¯¹ï¼
                    validPairs.push({
                        prev: prev.val,
                        punc: punc.val,
                        next: next.val
                    });
                }
            }
        });

        return validPairs;
    }

    // ã€æ–°å¢ã€‘QAæ¨¡å¼ä¸€é”®æ˜¾ç¤ºç­”æ¡ˆ
    function showQaAnswer() {
        // æ‰¾åˆ° QA å¡ç‰‡é‡Œæ‰€æœ‰è¢«é®ç›–çš„å­—ï¼Œç§»é™¤ 'masked' ç±»åå³å¯
        const maskedChars = document.querySelectorAll('#qaCardContent .masked');
        maskedChars.forEach(char => {
            char.classList.remove('masked');
            // å¯é€‰ï¼šåŠ ä¸ªé¢œè‰²è¡¨ç¤ºè¿™æ˜¯ç¿»å¼€çš„ç­”æ¡ˆ
            char.style.color = '#10b981'; 
        });
    }

</script>

</body>
</html>